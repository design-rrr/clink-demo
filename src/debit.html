<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>CLINK Demo - Common Lightning Interface for Nostr Keys</title>
    <meta name="title" content="CLINK Demo - Common Lightning Interface for Nostr Keys">
    <meta name="description" content="A live demonstration of CLINK Debits (part of Common Lightning Interface for Nostr Keys), a Nostr-native method for authorizing payments from a user's wallet.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://clinkme.dev/debit.html">
    <meta property="og:title" content="CLINK Demo - Common Lightning Interface for Nostr Keys">
    <meta property="og:description" content="A live demonstration of CLINK Debits (part of Common Lightning Interface for Nostr Keys), a Nostr-native method for authorizing payments from a user's wallet.">
    <meta property="og:image" content="https://clinkme.dev/clinkmedev-og-card.png">
    <meta property="og:logo" content="https://clinkme.dev/favicon.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://clinkme.dev/debit.html">
    <meta property="twitter:title" content="CLINK Demo - Common Lightning Interface for Nostr Keys">
    <meta property="twitter:description" content="A live demonstration of CLINK Debits (part of Common Lightning Interface for Nostr Keys), a Nostr-native method for authorizing payments from a user's wallet.">
    <meta property="twitter:image" content="https://clinkme.dev/clinkmedev-og-card.png">

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preload" href="styles.css" as="style" onload="this.rel='stylesheet'">
    <link href="styles.css" rel="stylesheet">
    <script defer data-domain="clinkme.dev" src="https://plausible.io/js/script.js"></script>
</head>
<body>
    <div id="nav"></div>
    <script src="nav.js"></script>
    <div class="container">
        <header>
            <h1>CLINK Protocol Demo</h1>
        </header>

        <main>
            <div class="intro-section">
                <h2>Debits: Authorize Payments from Your Wallet</h2>
                <p>CLINK provides standardized, <strong>Nostr-native</strong> methods for common Lightning interactions. It uses Nostr's built-in transport, identity, and encryption to let Lightning apps and nodes talk to each other securely.</p><p>This approach avoids the reliance on traditional web servers, offering a greatly enhanced user experience over alternatives like LNURL or NWC.</p>
                <p class="intro-definition">An <code>ndebit</code> is a static, shareable code that grants permission for another party to request payments from your Lightning node over Nostr.</p>
            </div>

            <div class="demo-section">
                <h2>Pay an Invoice with a CLINK Debit</h2>
                <p>Paste an <code>ndebit</code> string and a BOLT 11 invoice to authorize a payment from a provider. This demonstrates how a client can request a payment from a server that has been granted permission.</p>
                <p>You can get an <code>ndebit</code> from a CLINK-compatible wallet like <a href="https://shockwallet.app" target="_blank" rel="noopener noreferrer">ShockWallet</a> to try this feature.</p>
                <div class="form-group">
                    <label for="ndebitInput">Debit String (ndebit)</label>
                    <textarea id="ndebitInput" placeholder="Paste your ndebit string here..."></textarea>
                </div>
                <div class="results-section decoded-data-container">
                    <h3>Decoded Debit Data</h3>
                    <pre id="decodedDebitData">Decoded data will appear here...</pre>
                </div>
                <div id="debit-actions" style="display: none;">
                    <div class="form-group">
                        <label for="bolt11Input">Invoice to Pay (bolt11)</label>
                        <textarea id="bolt11Input" placeholder="Paste the bolt11 invoice to pay"></textarea>
                        <div class="qr-code-container" id="debit-qr-container" style="display: none;">
                            <canvas id="debitQrCanvas"></canvas>
                        </div>
                    </div>
                    <div id="client-identity" style="display: none; margin-bottom: 1rem; font-size: 0.9rem; opacity: 0.8; text-align: center;">
                        <small>Requesting as: <span id="client-npub"></span></small>
                    </div>
                </div>
                <button id="debitActionButton">Decode Debit</button>
                <div id="payment-result" class="results-section" style="display: none;">
                    <h3>Payment Result</h3>
                    <pre id="paymentData">The result of the payment will appear here...</pre>
                </div>
            </div>
        </main>

        <footer>
            <p>Learn more about the CLINK protocol on <a href="https://github.com/shocknet/clink" target="_blank">GitHub</a>.</p>
        </footer>
    </div>
    <script src="debit.js"></script>
</body>
</html> 
